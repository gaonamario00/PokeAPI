<!DOCTYPE html>
<html lang="en">
<head>
    <title>POKEAPI</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body style = "background-color: blue;">
    <img style="display: block; margin: 0 auto" width="750" height="400" src="https://logos-marcas.com/wp-content/uploads/2020/05/Pokemon-Logo.png"> 

    <div class = "container">

        <div style = "text-align: center;">
            <h3 style = "color: white;"> BIENVENIDO A LA POKEAPI</h3>
            <input  style = "text-align: center;" type = "number" id = "pokeID" >
            <button class="btn btn-info" onclick="alertaInfo()">Info</button>
            <br>
            <br>
            <button  name = "btn" class = "btn btn-warning" style = "color: white;" onclick = "buscar()" >BUSCAR</button>
            
        </div>
        <br>
        <div id = "results" style = "text-align: center;">
            <!-- <div id="spin" class="spinner-border text-success" role="status">
                <span class="sr-only">Loading...</span>
              </div> -->
        </div>

    </div>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</body>
<script>

    var ID = "";
    var UrlApi = "";
    var data = undefined;
    var nombre = undefined;
    var img = undefined;
    var types = undefined;
    var spin = undefined;
    function buscar(){
        ID = document.getElementById("pokeID");
        if(ID.value==""||ID.value==undefined||ID.value==null){
            alertaAdvertencia();
        }else{
            if(ID.value<=0 || ID.value>898){
            console.log(ID.value);
            alertaError();
            }else{
            UrlApi = "https://pokeapi.co/api/v2/pokemon/" + ID.value;
            // alert(UrlApi);        
            // console.log(UrlApi);
            obtenerPokemon();
            }
        }
    }
    
    function obtenerPokemon(){

        clear();


        var request = new XMLHttpRequest();
        request.open('GET',UrlApi,true);
        request.send();

        request.onreadystatechange = function(){

            if(this.readyState == 4 && this.status == 200){
                var resultsData = this.response;
                data = JSON.parse(resultsData);
                mostrarPokemon(data);
            }
        }

    }

    function mostrarPokemon(data){
        
        var element =  document.getElementById("results");
        nombre = document.createElement('h3');
        nombre.style.color = "yellow";
        var htmlStyle = "<hr/ ><strong>" +data.id+". "+  data.name + "</strong><br />";
        nombre.innerHTML = htmlStyle; 
        element.appendChild(nombre);

        img = document.createElement('img');
        img.src = data.sprites.front_default;
        img.width = "300";
        img.height = "300";
        element.appendChild(img);

        htmlStyle = "<hr/ ><strong>";

        for(var i = 0; i<data.types.length;i++){
            if(i==1) htmlStyle+= "/";
            types = document.createElement('h4');
            types.style.color = "white";
            htmlStyle += data.types[i].type.name;

        }
        htmlStyle += "</strong><br />";
        types.innerHTML = htmlStyle;
        element.appendChild(types);
  
        
    }

    function eliminarElemento(id){
	imagen = document.getElementById(id);	
	if (!imagen){
		alert("El elemento selecionado no existe");
	} else {
        debugger;
		var padre = imagen.parentNode;
		padre.removeChild(imagen);
	}
}
function alertaError(){
    Swal.fire({
                title: "Valor fuera de rango",
                text: "Por favor ingrese un numero de 1-898",
                icon: "error"
           })
           clear();
}
function alertaAdvertencia(){
    Swal.fire({
                title: "Debe ingresar algun valor",
                text: "Por favor ingrese un numero de 1-898",
                icon: "warning"
           })
           clear();
}
function alertaInfo(){
    Swal.fire({
                title: "Información",
                text: "Actualmente existen 898 Pokemón con la última entrega que fue Pokémon Sword y Pokémon Shield.",
                icon: "info"
           })
}
function clear(){
    var C = document.getElementById("pokeID");
    C.value=null;
    C = document.getElementById("results");
    C.innerHTML = "";
}

</script>

</html>